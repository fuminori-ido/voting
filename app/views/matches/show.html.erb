<% content_for :title, "Showing match" %>

<div class="md:w-2/3 w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <h1 class="font-bold text-4xl"><%= @rec.name %> <%= v_i18n('stat') %></h1>

  <% if @rec.match_candidates.any? %>
    <table class="text-md bg-white shadow-md rounded mb-4"">
      <thead>
        <tr>
          <th><%= v_i18n('order')       %></th>
          <th><%= v_i18n('name')        %></th>
          <th><%= v_i18n('vote_score')  %></th>
        </tr>
      </thead>
      <tbody>
        <% Vote.score.where(matches: {id: @rec.id}).order(score: 'DESC', c: 'ASC').each.with_index do |entry, n| %>
          <tr class="border-b hover:bg-cyan-200">
            <td class='text-right'><%= v_i18n('n_th', n: n + 1) %></td>
            <td                   ><%= entry.c %></td>
            <td class='text-right'><%= entry.score %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p class="text-center my-10">Not yet voted.</p>
  <% end %>

  <%= link_to_index(matches_path) %>
</div>
